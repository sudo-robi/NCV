{"ast":null,"code":"import React,{useEffect,useState}from'react';import axios from'axios';import'./LogViewer.css';import{formatTimestamp}from'../App';import{mockLogs}from'../mockData';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function LogViewer(){const[logs,setLogs]=useState([]);const[searchTerm,setSearchTerm]=useState('');const[filteredLogs,setFilteredLogs]=useState([]);const[currentPage,setCurrentPage]=useState(1);const[logsPerPage]=useState(10);const[sortOrder,setSortOrder]=useState('asc');useEffect(()=>{const LOG_URL=process.env.REACT_APP_LOG_SERVER_URL||'http://localhost:8081/logs';axios.get(LOG_URL).then(response=>{setLogs(response.data);setFilteredLogs(response.data);}).catch(error=>{console.error('Error fetching logs:',error);// Fallback to mock data if backend is unavailable\nconsole.log('Using mock data for demo purposes');setLogs(mockLogs);setFilteredLogs(mockLogs);});},[]);useEffect(()=>{const filtered=logs.filter(log=>log.message.toLowerCase().includes(searchTerm.toLowerCase()));setFilteredLogs(filtered);},[searchTerm,logs]);const handleSort=()=>{const sortedLogs=[...filteredLogs].sort((a,b)=>{if(sortOrder==='asc'){return a.timestamp-b.timestamp;}else{return b.timestamp-a.timestamp;}});setFilteredLogs(sortedLogs);setSortOrder(sortOrder==='asc'?'desc':'asc');};const indexOfLastLog=currentPage*logsPerPage;const indexOfFirstLog=indexOfLastLog-logsPerPage;const currentLogs=filteredLogs.slice(indexOfFirstLog,indexOfLastLog);const paginate=pageNumber=>setCurrentPage(pageNumber);return/*#__PURE__*/_jsxs(\"div\",{className:\"log-viewer\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Audit History\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search audit logs...\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),className:\"search-bar\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center'},children:[/*#__PURE__*/_jsxs(\"button\",{onClick:handleSort,className:\"sort-button\",children:[\"Sort by Time (\",sortOrder,\")\"]}),/*#__PURE__*/_jsxs(\"span\",{style:{color:'#94a3b8',fontSize:'0.9rem'},children:[\"Showing \",filteredLogs.length,\" entries\"]})]}),/*#__PURE__*/_jsx(\"ul\",{className:\"log-list\",children:currentLogs.map((log,index)=>/*#__PURE__*/_jsxs(\"li\",{className:\"log-item\",children:[/*#__PURE__*/_jsx(\"strong\",{children:formatTimestamp(log.timestamp)}),/*#__PURE__*/_jsx(\"span\",{children:log.message})]},index))}),/*#__PURE__*/_jsx(\"div\",{className:\"pagination\",children:Array.from({length:Math.ceil(filteredLogs.length/logsPerPage)},(_,i)=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>paginate(i+1),className:currentPage===i+1?'active':'',children:i+1},i+1))})]});}export default LogViewer;","map":{"version":3,"names":["React","useEffect","useState","axios","formatTimestamp","mockLogs","jsx","_jsx","jsxs","_jsxs","LogViewer","logs","setLogs","searchTerm","setSearchTerm","filteredLogs","setFilteredLogs","currentPage","setCurrentPage","logsPerPage","sortOrder","setSortOrder","LOG_URL","process","env","REACT_APP_LOG_SERVER_URL","get","then","response","data","catch","error","console","log","filtered","filter","message","toLowerCase","includes","handleSort","sortedLogs","sort","a","b","timestamp","indexOfLastLog","indexOfFirstLog","currentLogs","slice","paginate","pageNumber","className","children","type","placeholder","value","onChange","e","target","style","display","justifyContent","alignItems","onClick","color","fontSize","length","map","index","Array","from","Math","ceil","_","i"],"sources":["/home/robi/Desktop/NCV/frontend/src/components/LogViewer.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport './LogViewer.css';\nimport { formatTimestamp } from '../App';\nimport { mockLogs } from '../mockData';\n\nfunction LogViewer() {\n  const [logs, setLogs] = useState([]);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [filteredLogs, setFilteredLogs] = useState([]);\n  const [currentPage, setCurrentPage] = useState(1);\n  const [logsPerPage] = useState(10);\n  const [sortOrder, setSortOrder] = useState('asc');\n\n  useEffect(() => {\n    const LOG_URL = process.env.REACT_APP_LOG_SERVER_URL || 'http://localhost:8081/logs';\n    axios.get(LOG_URL)\n      .then(response => {\n        setLogs(response.data);\n        setFilteredLogs(response.data);\n      })\n      .catch(error => {\n        console.error('Error fetching logs:', error);\n        // Fallback to mock data if backend is unavailable\n        console.log('Using mock data for demo purposes');\n        setLogs(mockLogs);\n        setFilteredLogs(mockLogs);\n      });\n  }, []);\n\n  useEffect(() => {\n    const filtered = logs.filter(log =>\n      log.message.toLowerCase().includes(searchTerm.toLowerCase())\n    );\n    setFilteredLogs(filtered);\n  }, [searchTerm, logs]);\n\n  const handleSort = () => {\n    const sortedLogs = [...filteredLogs].sort((a, b) => {\n      if (sortOrder === 'asc') {\n        return a.timestamp - b.timestamp;\n      } else {\n        return b.timestamp - a.timestamp;\n      }\n    });\n    setFilteredLogs(sortedLogs);\n    setSortOrder(sortOrder === 'asc' ? 'desc' : 'asc');\n  };\n\n  const indexOfLastLog = currentPage * logsPerPage;\n  const indexOfFirstLog = indexOfLastLog - logsPerPage;\n  const currentLogs = filteredLogs.slice(indexOfFirstLog, indexOfLastLog);\n\n  const paginate = (pageNumber) => setCurrentPage(pageNumber);\n\n  return (\n    <div className=\"log-viewer\">\n      <h2>Audit History</h2>\n      <input\n        type=\"text\"\n        placeholder=\"Search audit logs...\"\n        value={searchTerm}\n        onChange={(e) => setSearchTerm(e.target.value)}\n        className=\"search-bar\"\n      />\n      <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\n        <button onClick={handleSort} className=\"sort-button\">\n          Sort by Time ({sortOrder})\n        </button>\n        <span style={{ color: '#94a3b8', fontSize: '0.9rem' }}>Showing {filteredLogs.length} entries</span>\n      </div>\n      <ul className=\"log-list\">\n        {currentLogs.map((log, index) => (\n          <li key={index} className=\"log-item\">\n            <strong>{formatTimestamp(log.timestamp)}</strong>\n            <span>{log.message}</span>\n          </li>\n        ))}\n      </ul>\n      <div className=\"pagination\">\n        {Array.from({ length: Math.ceil(filteredLogs.length / logsPerPage) }, (_, i) => (\n          <button\n            key={i + 1}\n            onClick={() => paginate(i + 1)}\n            className={currentPage === i + 1 ? 'active' : ''}\n          >\n            {i + 1}\n          </button>\n        ))}\n      </div>\n    </div>\n  );\n}\n\nexport default LogViewer;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,MAAO,iBAAiB,CACxB,OAASC,eAAe,KAAQ,QAAQ,CACxC,OAASC,QAAQ,KAAQ,aAAa,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEvC,QAAS,CAAAC,SAASA,CAAA,CAAG,CACnB,KAAM,CAACC,IAAI,CAAEC,OAAO,CAAC,CAAGV,QAAQ,CAAC,EAAE,CAAC,CACpC,KAAM,CAACW,UAAU,CAAEC,aAAa,CAAC,CAAGZ,QAAQ,CAAC,EAAE,CAAC,CAChD,KAAM,CAACa,YAAY,CAAEC,eAAe,CAAC,CAAGd,QAAQ,CAAC,EAAE,CAAC,CACpD,KAAM,CAACe,WAAW,CAAEC,cAAc,CAAC,CAAGhB,QAAQ,CAAC,CAAC,CAAC,CACjD,KAAM,CAACiB,WAAW,CAAC,CAAGjB,QAAQ,CAAC,EAAE,CAAC,CAClC,KAAM,CAACkB,SAAS,CAAEC,YAAY,CAAC,CAAGnB,QAAQ,CAAC,KAAK,CAAC,CAEjDD,SAAS,CAAC,IAAM,CACd,KAAM,CAAAqB,OAAO,CAAGC,OAAO,CAACC,GAAG,CAACC,wBAAwB,EAAI,4BAA4B,CACpFtB,KAAK,CAACuB,GAAG,CAACJ,OAAO,CAAC,CACfK,IAAI,CAACC,QAAQ,EAAI,CAChBhB,OAAO,CAACgB,QAAQ,CAACC,IAAI,CAAC,CACtBb,eAAe,CAACY,QAAQ,CAACC,IAAI,CAAC,CAChC,CAAC,CAAC,CACDC,KAAK,CAACC,KAAK,EAAI,CACdC,OAAO,CAACD,KAAK,CAAC,sBAAsB,CAAEA,KAAK,CAAC,CAC5C;AACAC,OAAO,CAACC,GAAG,CAAC,mCAAmC,CAAC,CAChDrB,OAAO,CAACP,QAAQ,CAAC,CACjBW,eAAe,CAACX,QAAQ,CAAC,CAC3B,CAAC,CAAC,CACN,CAAC,CAAE,EAAE,CAAC,CAENJ,SAAS,CAAC,IAAM,CACd,KAAM,CAAAiC,QAAQ,CAAGvB,IAAI,CAACwB,MAAM,CAACF,GAAG,EAC9BA,GAAG,CAACG,OAAO,CAACC,WAAW,CAAC,CAAC,CAACC,QAAQ,CAACzB,UAAU,CAACwB,WAAW,CAAC,CAAC,CAC7D,CAAC,CACDrB,eAAe,CAACkB,QAAQ,CAAC,CAC3B,CAAC,CAAE,CAACrB,UAAU,CAAEF,IAAI,CAAC,CAAC,CAEtB,KAAM,CAAA4B,UAAU,CAAGA,CAAA,GAAM,CACvB,KAAM,CAAAC,UAAU,CAAG,CAAC,GAAGzB,YAAY,CAAC,CAAC0B,IAAI,CAAC,CAACC,CAAC,CAAEC,CAAC,GAAK,CAClD,GAAIvB,SAAS,GAAK,KAAK,CAAE,CACvB,MAAO,CAAAsB,CAAC,CAACE,SAAS,CAAGD,CAAC,CAACC,SAAS,CAClC,CAAC,IAAM,CACL,MAAO,CAAAD,CAAC,CAACC,SAAS,CAAGF,CAAC,CAACE,SAAS,CAClC,CACF,CAAC,CAAC,CACF5B,eAAe,CAACwB,UAAU,CAAC,CAC3BnB,YAAY,CAACD,SAAS,GAAK,KAAK,CAAG,MAAM,CAAG,KAAK,CAAC,CACpD,CAAC,CAED,KAAM,CAAAyB,cAAc,CAAG5B,WAAW,CAAGE,WAAW,CAChD,KAAM,CAAA2B,eAAe,CAAGD,cAAc,CAAG1B,WAAW,CACpD,KAAM,CAAA4B,WAAW,CAAGhC,YAAY,CAACiC,KAAK,CAACF,eAAe,CAAED,cAAc,CAAC,CAEvE,KAAM,CAAAI,QAAQ,CAAIC,UAAU,EAAKhC,cAAc,CAACgC,UAAU,CAAC,CAE3D,mBACEzC,KAAA,QAAK0C,SAAS,CAAC,YAAY,CAAAC,QAAA,eACzB7C,IAAA,OAAA6C,QAAA,CAAI,eAAa,CAAI,CAAC,cACtB7C,IAAA,UACE8C,IAAI,CAAC,MAAM,CACXC,WAAW,CAAC,sBAAsB,CAClCC,KAAK,CAAE1C,UAAW,CAClB2C,QAAQ,CAAGC,CAAC,EAAK3C,aAAa,CAAC2C,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE,CAC/CJ,SAAS,CAAC,YAAY,CACvB,CAAC,cACF1C,KAAA,QAAKkD,KAAK,CAAE,CAAEC,OAAO,CAAE,MAAM,CAAEC,cAAc,CAAE,eAAe,CAAEC,UAAU,CAAE,QAAS,CAAE,CAAAV,QAAA,eACrF3C,KAAA,WAAQsD,OAAO,CAAExB,UAAW,CAACY,SAAS,CAAC,aAAa,CAAAC,QAAA,EAAC,gBACrC,CAAChC,SAAS,CAAC,GAC3B,EAAQ,CAAC,cACTX,KAAA,SAAMkD,KAAK,CAAE,CAAEK,KAAK,CAAE,SAAS,CAAEC,QAAQ,CAAE,QAAS,CAAE,CAAAb,QAAA,EAAC,UAAQ,CAACrC,YAAY,CAACmD,MAAM,CAAC,UAAQ,EAAM,CAAC,EAChG,CAAC,cACN3D,IAAA,OAAI4C,SAAS,CAAC,UAAU,CAAAC,QAAA,CACrBL,WAAW,CAACoB,GAAG,CAAC,CAAClC,GAAG,CAAEmC,KAAK,gBAC1B3D,KAAA,OAAgB0C,SAAS,CAAC,UAAU,CAAAC,QAAA,eAClC7C,IAAA,WAAA6C,QAAA,CAAShD,eAAe,CAAC6B,GAAG,CAACW,SAAS,CAAC,CAAS,CAAC,cACjDrC,IAAA,SAAA6C,QAAA,CAAOnB,GAAG,CAACG,OAAO,CAAO,CAAC,GAFnBgC,KAGL,CACL,CAAC,CACA,CAAC,cACL7D,IAAA,QAAK4C,SAAS,CAAC,YAAY,CAAAC,QAAA,CACxBiB,KAAK,CAACC,IAAI,CAAC,CAAEJ,MAAM,CAAEK,IAAI,CAACC,IAAI,CAACzD,YAAY,CAACmD,MAAM,CAAG/C,WAAW,CAAE,CAAC,CAAE,CAACsD,CAAC,CAAEC,CAAC,gBACzEnE,IAAA,WAEEwD,OAAO,CAAEA,CAAA,GAAMd,QAAQ,CAACyB,CAAC,CAAG,CAAC,CAAE,CAC/BvB,SAAS,CAAElC,WAAW,GAAKyD,CAAC,CAAG,CAAC,CAAG,QAAQ,CAAG,EAAG,CAAAtB,QAAA,CAEhDsB,CAAC,CAAG,CAAC,EAJDA,CAAC,CAAG,CAKH,CACT,CAAC,CACC,CAAC,EACH,CAAC,CAEV,CAEA,cAAe,CAAAhE,SAAS","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}